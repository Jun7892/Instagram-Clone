<!DOCTYPE html>
<html>

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name='viewport' content='width=device-width, initial-scale=1.0'>
    <title>Lupistagram</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/common.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
    <script src="https://code.jquery.com/jquery-3.5.0.js"></script>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-cookie/1.4.1/jquery.cookie.js"></script>


    <link rel="icon" href="{{ url_for('static', filename='image/favicon.png') }}">
    <link rel="instagram-icon" onclick='window.location.href = "/register"'
        href="{{ url_for('static', filename='image/insta-logo.png') }}">
    <script>
        {% if msg %}
        alert("{{ msg }}")
        {% endif %}

        $(document).ready(function () {
            show_comment();
        });
        function show_comment() {
            $('#order-box').empty()
            $.ajax({
                type: 'GET',
                url: '/comment',
                data: {},
                success: function (response) {
                    let rows = response['comments']
                    for (let i = 0; i < rows.length; i++) {
                        let nick = rows[i]['nick']
                        let comment = rows[i]['comment']

                        let temp_html = `<li>
                                <span><span class="point-span userID">${nick}</span>${comment}</span>
                                <div>
                                    <img class="comment-more"
                                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/more.png"
                                        alt="more">
                                    <div class="comment-like">
                                        <img class="comment-heart"
                                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/heart.png"
                                            alt="í•˜íŠ¸">
                                        <img class="comment-heart-liked" src="static/image/liked.png" alt="ì¢‹ì•„ìš”ëœí•˜íŠ¸">
                                    </div>
                                </div>
                            </li>`
                        $('#post-comments-here').append(temp_html)
                    }

                }
            });
        }
        function save_comment() {
            // let comment = $('#input-comment').val()          // ì°¸ì¡° 2
            // let nick = get_user_nick()                       // ì°¸ì¡° 1
            $.ajax({                                            // GET nick name
                type: 'GET',
                url: '/api/nick',
                data: {},
                success: function (response) {
                    let nick = response['nickname'];   // QQQ1. ajax ì•ˆì—ì„œ ì„ ì–¸í•œ variable ë°–ì—ì„œ ì–´ë–»ê²Œ ì‚¬ìš©? comment_saveì™€ get_user_nickì„ ë‘ê°œ ë”°ë¡œ ë§Œë“¤ì–´ì„œ ì„ ì–¸í•˜ë‹ˆ undefinedë– ì„œ ajaxì•ˆì— ajax í•œ ê²ƒ (ì°¸ì¡° 1)
                    let comment = $('#input-comment2').val()   // QQQ2. ìœ„ì˜ ajaxì—ì„œ letì„ ì„ ì–¸í–ˆëŠ”ë° comment(ì°¸ì¡° 2)ê°€ ""ë¡œ ë¶ˆëŸ¬ì™€ì§€ì§€ ì•Šì•„ì„œ ì´ë ‡ê²Œ ë§Œë“¦. ì›ë˜ ì•ˆë˜ëŠ”ê±´ì§€? í•¨ìˆ˜ì²˜ëŸ¼ ìƒê°í•˜ë©´ ì•ˆë˜ëŠ” ë¶€ë¶„ì¸ê°€ìš”
                    $.ajax({                                    // POST comment
                        type: 'POST',
                        url: '/comment',
                        data: { nickname_give: nick, comment_give: comment },
                        fail: function (response) {
                            alert(response['msg']);
                        },
                        success: function (response) {
                            alert(response['msg'])
                            window.location.reload()
                        }
                    });
                }
            });
        }
        // QQQ0. flask routeì—ì„œ í† í° ì½ëŠ” ë¶€ë¶„ ì¤‘ë³µë˜ëŠ” ê²ƒ ì¤„ì´ë ¤ê³  /api/nickì—ì„œ ë¶ˆëŸ¬ì˜´. (í† í° ì½ëŠ” ê²ƒ ì™¸ì˜ ë°©ë²•ì€ ì—†ë‚˜ìš”...flask_login.current_user ê°™ì€..?)
        // + savecomment()ì—ì„œ functionì•ˆë§Œë“¤ê³  ë°”ë¡œ /api/nickë‚´ì˜ api_valid() í•¨ìˆ˜ë¥¼ ë¶ˆëŸ¬ì˜¤ëŠ” ê²ƒì€ ë¶ˆê°€? 
        function get_user_nick() {
            $.ajax({
                type: 'GET',
                url: '/api/nick',
                data: {},
                success: function (response) {  // QQQ3. if elseë¡œ êµ¬ì„±í•´ì•¼í•˜ëŠ”ì§€? ê·¸ëŸ´ ê²½ìš°ì—ëŠ” if (response['result'] == 'success') { ì´ë ‡ê²Œ ì¨ì•¼í•˜ëŠ”ì§€?
                    // alert(response['nickname'])    
                    return response['nickname'];   // QQQ1.
                }
            });
        }
        // QQQ. í•˜ë‹¨ scriptì•„ë‹Œ functionìœ¼ë¡œ remain í•˜ë©´ì„œ onclickìœ¼ë¡œ ì ìš© ê°€ëŠ¥í•œ ë²•?
        // function follow_user() {
        //     $(".btn-follow").click(function () {
        //         $(this).css('color', '#303335');
        //         $(this).text('ìš”ì²­ë¨')
        //     });
        // }

    </script>
</head>


<body>
    <!-- navigation -->
    <nav>
        <div class="nav-container">
            <div class="nav-1">
                <!-- <img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/logo.png" alt="logo_img">
            <div class="vl"></div> -->
                <img class="logo_instagram_txt" src="{{ url_for('static', filename='image/logo_text.png') }}"
                    onclick='window.location.href = "/main"' alt="logo_text">
            </div>
            <input id="searchInput" type="search" class="input-search" placeholder="ê²€ìƒ‰">
            <div class="nav-2" id="nav">
                <img src="static/image/home.png" onclick='window.location.href = "/main"' alt="í™ˆ">
                <img src="static/image/dm.png" alt="DM">
                <img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/explore.png" alt="íƒìƒ‰">
                <img src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/heart.png" alt="í•˜íŠ¸">
                <img class="pic" src="static/image/Lu6.png" onclick='window.location.href = "/mypage"' alt="ë§ˆì´í˜ì´ì§€">
            </div>
        </div>
    </nav>
    <!-- main -->
    <main>
        <div class="feeds">
            <!-- article -->



            <article>
                <header>
                    <div class="profile-of-article">
                        <img class="img-profile pic" src="static/image/Lu2.jpg" alt="youngthuglifeë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                        <span class="userID main-id point-span">youngthuglife</span>
                    </div>
                    <img class="icon-react icon-more"
                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/more.png" alt="more">
                </header>
                <div class="main-image">
                    <img src="static/image/Lu2.jpg" alt="Lupië‹˜ì˜ í”¼ë“œ ì‚¬ì§„" class="mainPic">
                </div>
                <div class="icons-react">
                    <div class="icons-left">

                        <img class="icon-react" id="none"
                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/heart.png"
                            onclick="like()" alt="í•˜íŠ¸">

                        <img class="icon-react"
                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/comment.png" alt="ë§í’ì„ ">
                        <img class="icon-react" src="{{url_for('static', filename='image/dm.png')}}" alt="DM">
                    </div>
                    <img class="icon-react"
                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/bookmark.png" alt="ë¶ë§ˆí¬">
                </div>
                <!-- article text data -->
                <div class="reaction">
                    <div class="liked-people">
                        <img class="pic" src="static/image/Lu2.jpg" alt="johnnyjsuhë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                        <p><span class="point-span">êµ¬í™©ì‘ë¬¼_king</span>ë‹˜ <span class="point-span">ì™¸ 2,412,751ëª…</span>ì´
                            ì¢‹ì•„í•©ë‹ˆë‹¤</p>
                    </div>
                    <div class="description">
                        <p><span class="point-span userID">êµ¬í™©ì‘ë¬¼_king</span><span class="at-tag">#ìˆ˜ìˆ˜ #ootd</span> ğŸ™‹â€â™‚ï¸
                        </p>
                    </div>
                    <div class="comment-section">
                        <ul class="comments">
                            <li>
                                <span><span class="point-span userID">postmalone</span>ë‚´ê°€ ì…ìœ¼ë©´ ë” ì˜ì–´ìš¸ë¦´ ê²ƒ ê°™ì•„</span>
                                <div>
                                    <img class="comment-more"
                                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/more.png"
                                        alt="more">
                                    <div class="comment-like">
                                        <img class="comment-heart"
                                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/heart.png"
                                            alt="í•˜íŠ¸" id="heart1">

                                        <img class="comment-heart-liked" src="static/image/liked.png" alt="ì¢‹ì•„ìš”ëœí•˜íŠ¸">
                                    </div>
                                </div>
                            </li>
                            <!-- input ê°’ ì—¬ê¸°ì— ì¶”ê°€ -->
                        </ul>
                        <div class="time-log">
                            <span>32ë¶„ ì „</span>
                        </div>
                    </div>
                </div>
                <div class="hl"></div>
                <div class="comment">
                    <input id="input-comment" class="input-comment" type="text" placeholder="ëŒ“ê¸€ ë‹¬ê¸°...">
                    <button type="submit" class="submit-comment" disabled>ê²Œì‹œ</button>
                </div>
            </article>

            <article>
                <header>
                    <div class="profile-of-article">
                        <img class="img-profile pic" src="static/image/Lu4.jpg" alt="ì–´ì©”í‹°ë¹„ë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                        <span class="userID main-id point-span">ì–´ì©”í‹°ë¹„</span>
                    </div>
                    <img class="icon-react icon-more"
                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/more.png" alt="more">
                </header>
                <div class="main-image">
                    <img src="static/image/Lu4.jpg" alt="ì–´ì©”í‹°ë¹„ë‹˜ì˜ í”¼ë“œ ì‚¬ì§„" class="mainPic">
                </div>
                <div class="icons-react">
                    <div class="icons-left">
                        <img class="icon-react"
                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/heart.png" alt="í•˜íŠ¸">
                        <img class="icon-react"
                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/comment.png" alt="ë§í’ì„ ">
                        <img class="icon-react" src="static/image/dm.png" alt="DM">
                    </div>
                    <img class="icon-react"
                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/bookmark.png" alt="ë¶ë§ˆí¬">
                </div>
                <!-- article text data -->
                <div class="reaction">
                    <div class="liked-people">
                        <img class="pic" src="static/image/Lu5.jpg" alt="shshshaë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                        <p><span class="point-span">ì–´ì©”í‹°ë¹„</span>ë‹˜ <span class="point-span">ì™¸ 4,612,203ëª…</span>ì´
                            ì¢‹ì•„í•©ë‹ˆë‹¤</p>
                    </div>
                    <div class="description">
                        <p><span class="point-span userID">7ì¡°ë‹¤</span>ì˜¤ëŠ˜ì€ ì˜¥ìˆ˜ìˆ˜ ìºëŸ¬ê°</p>
                    </div>
                    <div class="comment-section">
                        <ul class="comments" id="post-comments-here">
                            <li>
                                <span><span class="point-span userID">claire-says._.</span>ë‚˜ëŠ” ê°ì.</span>
                                <div>
                                    <img class="comment-more"
                                        src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/more.png"
                                        alt="more">
                                    <div class="comment-like">
                                        <img class="comment-heart"
                                            src="https://s3.ap-northeast-2.amazonaws.com/cdn.wecode.co.kr/bearu/heart.png"
                                            alt="í•˜íŠ¸">
                                        <img class="comment-heart-liked" src="static/image/liked.png" alt="ì¢‹ì•„ìš”ëœí•˜íŠ¸">
                                    </div>
                                </div>
                            </li>
                            <!-- input ê°’ ì—¬ê¸°ì— ì¶”ê°€ -->
                        </ul>
                        <div class="time-log">
                            <span>1ì‹œê°„ ì „</span>
                        </div>
                    </div>
                </div>
                <div class="hl"></div>
                <div class="comment">
                    <input id="input-comment2" class="input-comment" type="text" placeholder="ëŒ“ê¸€ ë‹¬ê¸°...">
                    <button id="submit-comment2" class="submit-comment" type="submit" onclick="save_comment()"
                        disabled>ê²Œì‹œ</button>
                </div>

            </article>

        </div>
        <!--                                                                                                           -->
        <!--                                           << story section >>                                             -->
        <!--                                                                                                           -->
        <!-- main-right -->
        <div class="main-right">
            <div class="myProfile">
                <img class="pic" src="static/image/Lu6.png" id="nav" onclick='window.location.href = "/mypage"'
                    alt="ë§ˆì´í˜ì´ì§€">
                <div>
                    <span class="userID point-span">{{nickname}}</span>
                    <!-- IDë¡œ ì–´ë–»ê²Œ? -->
                    <span class="sub-span">{{id}}</span>
                </div>
            </div>
            <div class="section-story">
                <div class="menu-title">
                    <span class="sub-title">ìŠ¤í† ë¦¬</span>
                    <span class="find-more">ëª¨ë‘ ë³´ê¸°</span>
                </div>
                <ul class="story-list">
                    <li>
                        <div class="gradient-wrap">
                            <img class="img-profile story" src="static/image/Lu1.jpg" alt="star_warsë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">

                            <script> // cssë‚´ ë°±ê·¸ë¼ìš´ë“œ ìƒ‰ ë³€ê²½ -> id ë‹¬ í•„ìš” ì—†ìŒ!
                                $("img").click(function () {
                                    $(this).parent().css('background', 'transparent');
                                });
                            </script>

                        </div>
                        <div class="profile-text">
                            <span class="userID point-span">star_wars</span>
                            <span class="sub-span">7ë¶„ ì „</span>
                        </div>
                    </li>
                    <li>
                        <div class="gradient-wrap">
                            <img class="img-profile story" src="static/image/Lu4.jpg" alt="oh_my__lifeë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">

                            <script> // parent tagì¸ divë¶ˆëŸ¬ì™€ì„œ cssë‚´ ë°±ê·¸ë¼ìš´ë“œ ìƒ‰ ë³€ê²½ 
                                $("img").click(function () {
                                    $(this).parent().css('background', 'transparent');
                                });
                            </script>


                        </div>
                        <div class="profile-text">
                            <span class="userID point-span">oh_my__life</span>
                            <span class="sub-span">28ë¶„ ì „</span>
                        </div>
                    </li>
                    <li>
                        <div class="gradient-wrap">
                            <img class="img-profile story" src="static/image/Lu2.jpg" alt="dntlrdlë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                            <script> // cssë‚´ ë°±ê·¸ë¼ìš´ë“œ ìƒ‰ ë³€ê²½ 
                                $("img").click(function () {
                                    $(this).parent().css('background', 'transparent');
                                });
                            </script>
                        </div>

                        <div class="profile-text">
                            <span class="userID point-span">dntlrdl</span>
                            <span class="sub-span">33ë¶„ ì „</span>
                        </div>
                    </li>
                    <li>
                        <div class="gradient-wrap">
                            <img class="img-profile story" src="static/image/Lu4.jpg" alt="toogoodtobetrueë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                            <script> // cssë‚´ ë°±ê·¸ë¼ìš´ë“œ ìƒ‰ ë³€ê²½ 
                                $("img").click(function () {
                                    $(this).parent().css('background', 'transparent');
                                });
                            </script>
                        </div>
                        <div class="profile-text">
                            <span class="userID point-span">toogoodtobetrue</span>
                            <span class="sub-span">52ë¶„ ì „</span>
                        </div>
                    </li>
                </ul>
            </div>
            <!-- recommendation section -->
            <div class="section-recommend">
                <div class="menu-title">
                    <span class="sub-title">íšŒì›ë‹˜ì„ ìœ„í•œ ì¶”ì²œ</span>
                    <span class="find-more">ëª¨ë‘ ë³´ê¸°</span>
                </div>
                <ul class="recommend-list">
                    <li>
                        <div class="recommend-friend-profile">
                            <img class="img-profile" src="static/image/okk2.jpg" alt="renebaebaeë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                            <div class="profile-text">
                                <span class="userID point-span">ì˜¥ìˆ˜ìˆ˜</span>
                                <span class="sub-span">johnnyjsuhë‹˜ ì™¸ 2ëª…ì´ íŒ”ë¡œìš°í•©ë‹ˆë‹¤</span>
                            </div>
                        </div>
                        <span class="btn-follow">íŒ”ë¡œìš°</span>
                    </li>
                    <li>
                        <div class="recommend-friend-profile">
                            <img class="img-profile" src="static/image/Lu4.jpg" alt="ì–´ì©”í‹°ë¹„ë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                            <div class="profile-text">
                                <span class="userID point-span">ì–´ì©”í‹°ë¹„</span>
                                <span class="sub-span">Jam_minië‹˜ ì™¸ 5ëª…ì´ íŒ”ë¡œìš°í•©...</span>
                            </div>
                        </div>
                        <span class="btn-follow">íŒ”ë¡œìš°</span>

                    </li>
                    <script> // cssë‚´ ìƒ‰ ë³€ê²½ ë° íŒ”ë¡œìš°-> ìš”ì²­ë¨ìœ¼ë¡œ í…ìŠ¤íŠ¸ ë³€ê²½ -> id ë‹¬ í•„ìš” ì—†ìŒ!
                        $(".btn-follow").click(function () {
                            $(this).css('color', '#303335');
                            $(this).text('ìš”ì²­ë¨');
                        });

                    </script>
                    <li>
                        <div class="recommend-friend-profile">
                            <img class="img-profile" src="static/image/gamja_crop.jpg" alt="ê°ìë‹˜ì˜ í”„ë¡œí•„ ì‚¬ì§„">
                            <div class="profile-text">
                                <span class="userID point-span">ê°ìking</span>
                                <span class="sub-span">êµ¬í™©ì‘ë¬¼ë‹˜ì´ íŒ”ë¡œìš°í•©ë‹ˆë‹¤</span>
                            </div>
                        </div>
                        <span class="btn-follow gamja">íŒ”ë¡œìš°</span>
                        <script>
                            $(".gamja").click(function () {
                                alert('ì´ëŸ°..ì–´ì©Œë‚˜,,ê°ìkingë‹˜ì´ íŒ”ë¡œìš°ë¥¼ ê±°ì ˆí•˜ì˜€ìŠµë‹ˆë‹¤. ğŸ¤­')
                            });
                        </script>
                    </li>
                </ul>
            </div>
            <footer>
                <p class="insta-sccript">
                    ì†Œê°œ âˆ™ ë„ì›€ë§ âˆ™ í™ë³´ ì„¼í„° âˆ™ API âˆ™ ì±„ìš© ì •ë³´ âˆ™ ê°œì¸ì •ë³´ì²˜ë¦¬ë°©ì¹¨ âˆ™ <br>ì•½ê´€ âˆ™ ìœ„ì¹˜ âˆ™ ì¸ê¸°ê³„ì • âˆ™ í•´ì‹œíƒœê·¸ âˆ™ ì–¸ì–´
                    <br><br>
                    Â© 2021 INSTAGRAM FROM FACEBOOK
                </p>
            </footer>
        </div>
    </main>
    <script src="{{url_for('static', filename='js/main.js')}}"></script>

</body>

</html>